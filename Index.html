<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planner</title>
    <!-- 
        This HTML file is the main entry point of the Planner project.
        The purpose of this file is to provide a home page where users can view and manage their academic schedule.
        It includes a flowchart interface that displays classes organized by semesters.
        This functionality is essential for users to visualize their academic plan and make adjustments as needed.
        It contributes to the overall project by offering a user-friendly and interactive way to manage class schedules.
    -->

    <!-- Link to Google Fonts for Plus Jakarta Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Internal stylesheet -->
    <style>
        /* Global styles for the entire HTML document */
        html {
            height: 100%;
            background: radial-gradient(circle at top right, 
                                        #2C2C54 0%,  
                                        #003F5C 50%,  
                                        #231f16 100%);  
        }

        /* Basic styling for the body */
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            margin: 0;
            padding: 0;
            height: 100%;
            font-size: 18px;
            background: transparent; 
        }

        /* Styling for the header */
        header {
            color: #EDEDED;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Styling for the navigation menu */
        nav {
            display: flex;
            align-items: center;
        }

        /* Styling for navigation links */
        nav a {
            color: #EDEDED;
            text-decoration: none;
            margin: 0 15px;
            transition: color 0.3s;
        }

        nav a:hover {
            color: grey;
        }

        /* Container styling */
        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-direction: column;
        }

        .content {
            text-align: left;
            padding: 10px;
            flex: 1;
            color: #EDEDED;
            font-size: 18px;
            width: 100%;
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            background-color: #D99326;
            color: #252b34;
            border-radius: 5px;
            text-decoration: none;
            margin-top: 20px;
            font-weight: bold;
            transition: background-color 0.3s, color 0.3s;
        }

        .btn:hover {
            background-color: grey;
            color: #252b34;
        }

        /* Footer styling */
        .footer {
            padding: 10px 30px;
            color: #EDEDED;
            font-size: 0.7em;
            text-align: left;
        }

        img {
            max-width: 60%;
            height: auto;
        }

        h2 {
            color: #EDEDED;
            font-size: 42px;
        }

        .logo {
            max-height: 50px;
            margin-right: 10px;
        }

        .flowchart {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }

        .year {
            display: flex;
            justify-content: space-between;
        }

        .semester {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 5px;
            width: 45%;
            min-width: 300px;
            min-height: 200px;
        }
        
        .semester h3 {
            color: #ffff; 
            text-align: center;
            margin-bottom: 10px;
        }

        .class-item {
            background: #2C2C54;
            color: #EDEDED;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            cursor: move;
        }

        .class-item.dragging {
            opacity: 0.5;
        }

        /* Styling for the delete button inside class items */
        .delete-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: #D32F2F;
            color: white;
            border: none;
            padding: 3px 5px;
            border-radius: 50%;
            cursor: pointer;
        }

        .delete-btn:hover {
            background-color: #B71C1C;
        }

    </style>
    
    <!-- Internal JavaScript for functionality -->
    <script>
        // Function to check if the user is logged in
        function checkUser() {
            var currentUser = localStorage.getItem('currentUser');
            if (!currentUser) {
                // Redirect to sign-in page if no user is logged in
                window.location.href = 'sign-in.html';
            } else {
                // Load user classes if logged in
                loadClasses();
            }
        }

        // Function to log out the user
        function signOut() {
            // Remove current user from local storage and redirect to sign-in page
            localStorage.removeItem('currentUser');
            window.location.href = 'sign-in.html';
        }

        // Function to load classes from local storage
        function loadClasses() {
            var currentUser = localStorage.getItem('currentUser');
            var userClasses = JSON.parse(localStorage.getItem(currentUser + '_classes')) || {};
            var semesters = ['fall1', 'spring1', 'fall2', 'spring2', 'fall3', 'spring3', 'fall4', 'spring4'];
            semesters.forEach(function(semester) {
                var semesterEl = document.getElementById(semester);
                var classItems = semesterEl.querySelectorAll('.class-item');
                // Clear existing classes
                classItems.forEach(function(item) {
                    item.remove();
                });
                // Add classes from local storage
                if (userClasses[semester]) {
                    userClasses[semester].forEach(function(cls) {
                        var classItem = document.createElement('div');
                        classItem.classList.add('class-item');
                        classItem.textContent = cls;
                        classItem.setAttribute('draggable', true);
                        classItem.addEventListener('dragstart', dragStart);
                        classItem.addEventListener('dragend', dragEnd);

                        // Create delete button for each class item
                        var deleteButton = document.createElement('button');
                        deleteButton.textContent = 'X';
                        deleteButton.classList.add('delete-btn');
                        deleteButton.addEventListener('click', function() {
                            classItem.remove();
                            saveClasses();
                        });

                        classItem.appendChild(deleteButton);

                        semesterEl.appendChild(classItem);
                    });
                }
            });
        }

        // Function to save classes to local storage
        function saveClasses() {
            var currentUser = localStorage.getItem('currentUser');
            var userClasses = {};
            var semesters = ['fall1', 'spring1', 'fall2', 'spring2', 'fall3', 'spring3', 'fall4', 'spring4'];
            semesters.forEach(function(semester) {
                var semesterEl = document.getElementById(semester);
                userClasses[semester] = [];
                semesterEl.querySelectorAll('.class-item').forEach(function(classItem) {
                    userClasses[semester].push(classItem.textContent);
                });
            });
            localStorage.setItem(currentUser + '_classes', JSON.stringify(userClasses));
        }

        // Function to handle the start of dragging
        function dragStart(event) {
            event.dataTransfer.setData('text/plain', event.target.textContent);
            event.target.classList.add('dragging');
        }

        // Function to handle the end of dragging
        function dragEnd(event) {
            event.target.classList.remove('dragging');
        }

        // Function to allow dropping elements
        function allowDrop(event) {
            event.preventDefault();
        }

        // Function to handle drop event
        function drop(event) {
            event.preventDefault();
            var data = event.dataTransfer.getData('text/plain');
            var classItem = document.createElement('div');
            classItem.classList.add('class-item');
            classItem.textContent = data;
            classItem.setAttribute('draggable', true);
            classItem.addEventListener('dragstart', dragStart);
            classItem.addEventListener('dragend', dragEnd);
            event.target.appendChild(classItem);
            saveClasses();
        }

        // Check user on window load
        window.onload = checkUser;
    </script>
</head>
<body>
    <header>
        <nav>
            <!-- Navigation menu -->
            <img src="images/wifi.svg" alt="Planner Logo" class="logo">
            <a href="#">Home</a>
            <a href="addclasses.html">Add Classes</a>
            <a href="searchclasses.html">Search Classes</a>
            <a href="https://nsm.utdallas.edu/advising/degree-plans/" target="_blank">Example flowcharts</a>
        </nav>
        <!-- Sign out button -->
        <a href="#" onclick="signOut()" class="btn">Sign Out</a>
    </header>

    <div class="container">
        <div class="content">
            <h2>Welcome to Planner!</h2>
            <p>The app Planner aims to link students to all the activities and social networks on campus.</p>
            <h3>Your Classes</h3>
            <!-- Flowchart structure to display class schedule -->
            <div class="flowchart">
                <div class="year">
                    <div id="fall1" class="semester" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <h3>Freshman Year - Fall</h3>
                    </div>
                    <div id="spring1" class="semester" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <h3>Freshman Year - Spring</h3>
                    </div>
                </div>
                <div class="year">
                    <div id="fall2" class="semester" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <h3>Sophomore Year - Fall</h3>
                    </div>
                    <div id="spring2" class="semester" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <h3>Sophomore Year - Spring</h3>
                    </div>
                </div>
                <div class="year">
                    <div id="fall3" class="semester" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <h3>Junior Year - Fall</h3>
                    </div>
                    <div id="spring3" class="semester" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <h3>Junior Year - Spring</h3>
                    </div>
                </div>
                <div class="year">
                    <div id="fall4" class="semester" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <h3>Senior Year - Fall</h3>
                    </div>
                    <div id="spring4" class="semester" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <h3>Senior Year - Spring</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <!-- Footer section with contact information -->
        <p>For any inquiries please contact: <a href="mailto:faarisamirkhan@gmail.com" style="color: #EDEDED;">faarisamirkhan@gmail.com</a></p>
        <p>&copy; 2024 Planner Inc. All rights reserved.</p>
    </footer>
</body>
</html>
